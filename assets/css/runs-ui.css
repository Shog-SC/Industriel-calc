/* assets/css/runs-ui.css — V1.0.8 (RUNS_LAYOUT_CLEAN_FINAL)
   ---------------------------------------------------------------------------
   UI "Save / Runs" (FRET / MINING / SALVAGE)

   Goal:
   - Clean, stable layout across your real DOM variants:
     Header: title left, controls right (select + search + buttons).
     Body: 2 panels: runs list (left) + details/empty (right) with full-height divider,
           consistent padding, no "floating" text.

   Notes:
   - Pure CSS; no JS changes.
   - Uses :has() (Chromium/Edge/Firefox modern supported).
*/

:root{
  --ru-border: rgba(255,255,255,.10);
  --ru-border-2: rgba(255,255,255,.14);
  --ru-text: rgba(245,248,255,.92);
  --ru-muted: rgba(245,248,255,.64);
  --ru-muted-2: rgba(245,248,255,.45);
  --ru-shadow: 0 10px 40px rgba(0,0,0,.55);
  --ru-radius: 18px;

  --ru-accent-b: rgba(0, 180, 210, .55);
  --ru-accent-bg: rgba(0, 180, 210, .14);

  --ru-panel-left: rgba(12, 19, 28, .28);
  --ru-panel-right: rgba(12, 19, 28, .18);
}

/* ---------------------------------------------------------------------------
   Overlay roots (Runs + Save) — resilient open/close
--------------------------------------------------------------------------- */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
){
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
  padding: 22px;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, #saveOverlay, #saveRunOverlay, #shogSaveOverlay)[hidden]{
  display: none !important;
}

:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
):is(.open,.show,.active,.is-open,.visible,[data-open="1"],[data-open="true"],[aria-hidden="false"]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Open by removing [hidden] on id overlays */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, #saveOverlay, #saveRunOverlay, #shogSaveOverlay):not([hidden]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* ---------------------------------------------------------------------------
   RUNS modal panel — overlay's first element child
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child{
  width: min(1240px, 96vw);
  height: min(640px, 88vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: hidden;

  display: grid;
  grid-template-rows: auto 1fr;
  grid-template-columns: 1fr;
}

/* ---------------------------------------------------------------------------
   HEADER: direct child containing "Search runs"
   - Title/meta full-width (row 1)
   - Controls docked right (row 2)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,header,section,nav,form):has(input[placeholder*="Search runs"]){
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px 12px;

  padding: 18px 18px 14px 18px;
  border-bottom: 1px solid rgba(255,255,255,.10);

  text-align: left !important;
  justify-content: flex-start;
}

/* Title/meta inside header: force to full width */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
  :is(h1,h2,h3,.runs-title,.runsui-title,.title){
  flex: 1 1 100%;
  margin: 0;
  color: var(--ru-text);
  font-weight: 800;
  letter-spacing: .2px;
  text-align: left !important;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
  :is(.runs-subtitle,.runsui-subtitle,.subtitle,small){
  flex: 1 1 100%;
  margin: 0;
  color: var(--ru-muted);
  font-size: 12px;
  line-height: 1.25;
  text-align: left !important;
}

/* Controls group order */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
  :is(select, input[placeholder*="Search runs"], button){
  order: 10;
}

/* First control pushes the group to the right */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
  select{
  margin-left: auto;
}

/* Search input */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  input[placeholder*="Search runs"]{
  flex: 0 0 240px;
  max-width: 320px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;

  position: static !important;
  top: auto !important;
  right: auto !important;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  input[placeholder*="Search runs"]::placeholder{
  color: var(--ru-muted-2);
}

/* Sort select */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  select{
  flex: 0 1 460px;
  width: min(460px, 100%);
  max-width: 520px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
}

/* Header buttons */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
  button{
  height: 38px;
  padding: 0 14px;
  border-radius: 999px;
  border: 1px solid var(--ru-accent-b);
  background: var(--ru-accent-bg);
  color: var(--ru-text);
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
}

/* ---------------------------------------------------------------------------
   BODY: direct child containing run items
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id]){
  display: grid;
  grid-template-columns: 360px 1fr;
  grid-template-rows: 1fr; /* lock to one row so panels fill height */
  min-height: 0;
  overflow: hidden;
  position: relative;
}

/* Left panel wrapper (if exists) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])
  > :is(div,section,article,ul,ol):has(.run-item,.runs-item,[data-run-id]){
  grid-column: 1;
  grid-row: 1;
  overflow: auto;
  padding: 14px 12px;
  background: var(--ru-panel-left);
  border-right: 1px solid rgba(255,255,255,.08);
  min-height: 0;
}

/* If run cards are direct children (no wrapper), keep them in col 1 */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])
  > :is(.run-item,.runs-item,li,[data-run-id]){
  grid-column: 1;
  grid-row: 1;
  padding: 10px 12px;
}

/* Right panel background always fills, with divider */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])::after{
  content: "";
  position: absolute;
  inset: 0 0 0 360px; /* start after left panel width */
  background: var(--ru-panel-right);
  border-left: 1px solid rgba(255,255,255,.08);
  pointer-events: none;
}

/* Details/empty: ANY non-run direct child (including <p>) goes to col 2 and is pinned top-left */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div,section,article,dialog):first-child
  > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])
  > :is(div,section,article,main,aside,p):not(:has(.run-item,.runs-item,[data-run-id])){
  grid-column: 2;
  grid-row: 1;
  align-self: start;
  justify-self: stretch;

  padding: 18px 18px;
  overflow: auto;
  min-height: 0;

  margin: 0;
  text-align: left !important;
}

/* Neutralize flex centering on known detail containers */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-detail,.runs-details,.runsui-detail,.detail,.details,.empty,.empty-state){
  text-align: left !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
}

/* Empty-state visual card (optional) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.empty,.empty-state){
  padding: 18px;
  border: 1px dashed rgba(255,255,255,.14);
  border-radius: var(--ru-radius);
  background: rgba(10,16,24,.40);
  color: var(--ru-muted);
}

/* Prevent absolute pinning inside list/actions */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-item,.runs-item,li,.run-actions,.runs-item-actions){
  position: static !important;
}

/* UL/OL cleanup */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  ul,
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  ol{
  list-style: none;
  margin: 0;
  padding: 0;
}

/* ---------------------------------------------------------------------------
   SAVE overlay — minimal
--------------------------------------------------------------------------- */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  > :is(div,section,article,dialog):first-child{
  width: min(740px, 94vw);
  max-height: min(520px, 86vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: auto;
  padding: 16px;
}

/* ---------------------------------------------------------------------------
   Responsive
--------------------------------------------------------------------------- */
@media (max-width: 980px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div,section,article,dialog):first-child
    > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id]){
    grid-template-columns: 1fr;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div,section,article,dialog):first-child
    > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])::after{
    inset: auto 0 0 0;
    height: 50%;
    border-left: none;
    border-top: 1px solid rgba(255,255,255,.08);
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(div,header,section,nav,form):has(input[placeholder*="Search runs"])
    select{
    margin-left: 0;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div,section,article,dialog):first-child
    > :is(div,section,article,main):has(.run-item,.runs-item,.run-actions,.runs-item-actions,[data-run-id])
    > :is(div,section,article,main,aside,p):not(:has(.run-item,.runs-item,[data-run-id])){
    grid-column: 1;
  }
}
