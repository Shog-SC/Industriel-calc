/* assets/css/runs-ui.css — V1.0.5 (RUNS_BODY_SPLIT_DETAILS_RIGHT)
   ---------------------------------------------------------------------------
   UI "Save / Runs" (FRET / MINING / SALVAGE)

   Fixes (based on latest screenshot):
   - Left column list is OK, but the "No run selected / Select a run on the left"
     empty-state is still rendered under the list (left column).
   - Right column remains blank because the DOM groups list + detail in the same
     body container.

   Strategy:
   - Keep resilient overlay open/close (V1.0.2).
   - Keep panel grid (V1.0.4).
   - Treat the *body container* (direct child containing run items) as a 2-column grid
     spanning the full width, then push:
       - list-like children to column 1
       - non-list children (details / empty-state blocks) to column 2

   No JS changes required.
*/

:root{
  --ru-border: rgba(255,255,255,.10);
  --ru-text: rgba(245, 248, 255, .92);
  --ru-muted: rgba(245, 248, 255, .64);
  --ru-muted-2: rgba(245, 248, 255, .45);
  --ru-shadow: 0 10px 40px rgba(0,0,0,.55);
  --ru-radius: 18px;
  --ru-gap: 14px;
}

/* ---------------------------------------------------------------------------
   Overlay roots (Runs + Save) — resilient open/close
--------------------------------------------------------------------------- */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
){
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
  padding: 22px;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* Closed via [hidden] */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay
)[hidden]{
  display: none !important;
}

/* Open states: class/data/aria */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
):is(.open, .show, .active, .is-open, .visible, [data-open="1"], [data-open="true"], [aria-hidden="false"]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Open by removing [hidden] */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, #saveOverlay, #saveRunOverlay, #shogSaveOverlay):not([hidden]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* ---------------------------------------------------------------------------
   RUNS panel (modal) — overlay's first element child
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child{
  width: min(1240px, 96vw);
  height: min(600px, 88vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: hidden;

  display: grid;
  grid-template-rows: auto auto 1fr;
  grid-template-columns: 1fr;
  padding-top: 12px;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > *{
  min-width: 0;
  min-height: 0;
}

/* ---------------------------------------------------------------------------
   Title block (best effort)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(h1, h2, h3, .runs-title, .runsui-title, .title):first-child{
  grid-row: 1;
  padding: 18px 18px 10px 18px;
  margin: 0;
  color: var(--ru-text);
  font-weight: 800;
  letter-spacing: .2px;
}

/* Subtitle (2nd node) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(.runs-subtitle, .runsui-subtitle, .subtitle, small):nth-child(2){
  grid-row: 1;
  padding: 0 18px 12px 18px;
  color: var(--ru-muted);
  font-size: 12px;
  line-height: 1.25;
}

/* ---------------------------------------------------------------------------
   Toolbar row — direct child that contains "Search runs"
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, header, section, nav, form):has(input[placeholder*="Search runs"]){
  grid-row: 2;

  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-end;
  gap: 10px 12px;

  width: 100% !important;
  justify-self: stretch !important;

  padding: 10px 18px 14px 18px;
  border-top: 1px solid rgba(255,255,255,.06);
  border-bottom: 1px solid rgba(255,255,255,.08);
}

/* Search */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  input[placeholder*="Search runs"]{
  flex: 0 0 240px;
  max-width: 320px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
  position: static !important;
  top: auto !important;
  right: auto !important;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  input[placeholder*="Search runs"]::placeholder{
  color: var(--ru-muted-2);
}

/* Sort select */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  select{
  flex: 0 1 340px;
  min-width: 180px;
  max-width: 520px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
}

/* Toolbar buttons */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, header, section, nav, form):has(input[placeholder*="Search runs"])
  button{
  height: 38px;
  padding: 0 14px;
  border-radius: 999px;
  border: 1px solid rgba(0, 180, 210, .55);
  background: rgba(0, 180, 210, .14);
  color: var(--ru-text);
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
}

/* ---------------------------------------------------------------------------
   BODY: detect the direct child that contains run items and split it (2 columns)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id]){
  grid-row: 3;

  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 0;
  min-height: 0;
  overflow: hidden;

  border-top: 1px solid rgba(255,255,255,.06);
}

/* Left column: list-like children */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
  > :is(div, section, article, ul, ol):has(.run-item, .runs-item, [data-run-id]){
  grid-column: 1;
  border-right: 1px solid rgba(255,255,255,.08);
  background: rgba(12, 19, 28, .28);
  overflow: auto;
  padding: 12px;
  min-height: 0;
  position: static !important;
}

/* If the run items are direct children of the body container */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
  > :is(.run-item, .runs-item, li){
  grid-column: 1;
}

/* Known detail/empty classes inside body: force to right panel */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
  :is(.runs-detail, .runs-details, .runsui-detail, .detail, .details, .empty, .empty-state){
  grid-column: 2;
  overflow: auto;
  padding: 14px;
  min-height: 0;
}

/* Fallback: move any direct child block that is NOT list-like into the right column */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child
  > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
  > :is(div, section, article, main, aside):not(:has(.run-item, .runs-item, [data-run-id])){
  grid-column: 2;
  overflow: auto;
  padding: 14px;
  min-height: 0;
}

/* Empty-state styling */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.empty, .empty-state){
  padding: 18px;
  border: 1px dashed rgba(255,255,255,.14);
  border-radius: var(--ru-radius);
  background: rgba(10,16,24,.40);
  color: var(--ru-muted);
}

/* Ensure run cards aren't pinned */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-item, .runs-item, li){
  position: static !important;
}

/* ---------------------------------------------------------------------------
   SAVE overlay — minimal (first child panel)
--------------------------------------------------------------------------- */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  > :is(div, section, article, dialog):first-child{
  width: min(740px, 94vw);
  max-height: min(520px, 86vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: auto;
  padding: 16px;
}

/* ---------------------------------------------------------------------------
   Responsive
--------------------------------------------------------------------------- */
@media (max-width: 920px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div, section, article, dialog):first-child
    > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id]){
    grid-template-columns: 1fr;
    grid-template-rows: 1fr 1fr;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div, section, article, dialog):first-child
    > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
    > :is(div, section, article, ul, ol):has(.run-item, .runs-item, [data-run-id]){
    grid-column: 1;
    border-right: none;
    border-bottom: 1px solid rgba(255,255,255,.08);
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    > :is(div, section, article, dialog):first-child
    > :is(div, section, article, main):has(.run-item, .runs-item, .run-actions, .runs-item-actions, [data-run-id])
    > :is(div, section, article, main, aside):not(:has(.run-item, .runs-item, [data-run-id])){
    grid-column: 1;
  }
}
