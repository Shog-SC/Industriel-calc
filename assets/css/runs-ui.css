/* assets/css/runs-ui.css — V1.0.3 (RUNS_MODAL_FALLBACK_DETECT)
   ---------------------------------------------------------------------------
   UI "Save / Runs" (FRET / MINING / SALVAGE)

   Status:
   - V1.0.2 restored "Runs" / "Save" opening reliably (hidden/class/data-open variants).
   - This V1.0.3 addresses the new symptom: the Runs manager opens but renders as a
     small, top-left stack (i.e., modal container not being styled due to DOM variants).

   Approach:
   - Keep V1.0.2 overlay open/close resiliency.
   - Add a robust *modal container fallback* that detects the Runs manager by content
     (search input placeholder "Search runs" + a select + action buttons), then applies
     the proper panel sizing/centering even if class names differ.

   Technical note:
   - Uses :has() for resilient detection. Firefox 121+ supports it.
*/

:root{
  --ru-bg: rgba(7, 12, 18, .82);
  --ru-surface: rgba(12, 19, 28, .72);
  --ru-surface-2: rgba(18, 27, 38, .68);
  --ru-border: rgba(255,255,255,.10);
  --ru-border-2: rgba(255,255,255,.14);
  --ru-text: rgba(245, 248, 255, .92);
  --ru-muted: rgba(245, 248, 255, .64);
  --ru-muted-2: rgba(245, 248, 255, .45);
  --ru-shadow: 0 10px 40px rgba(0,0,0,.55);
  --ru-radius: 18px;
  --ru-radius-sm: 12px;
  --ru-gap: 14px;
  --ru-gap-sm: 10px;
  --ru-accent: rgba(0, 180, 210, .95);
  --ru-accent-2: rgba(0, 180, 210, .25);
}

/* ---------------------------------------------------------------------------
   Overlay roots (Runs + Save) — support multiple IDs/classes
--------------------------------------------------------------------------- */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
){
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
  padding: 22px;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* Hard-hide when closed via [hidden] */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay
)[hidden]{
  display: none !important;
}

/* Open states (class/data/aria) */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
):is(.open, .show, .active, .is-open, .visible, [data-open="1"], [data-open="true"], [aria-hidden="false"]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* If your JS opens by removing [hidden], treat that as open */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, #saveOverlay, #saveRunOverlay, #shogSaveOverlay):not([hidden]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* ---------------------------------------------------------------------------
   RUNS modal container — explicit class/ids + FIRST-CHILD fallback
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(
    .runs-modal, .runs-panel, .runs-window, .runsui-modal,
    .runs-manager, .runsManager, .runs-ui, .runsUi, .runsui,
    #runsModal, #runsManager, #runsManagerModal, #myRunsModal
  ),
/* Fallback: first element child inside overlay */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  > :is(div, section, article, dialog):first-child{
  width: min(1240px, 96vw);
  height: min(600px, 88vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* ---------------------------------------------------------------------------
   MODAL FALLBACK (content-based detection)
--------------------------------------------------------------------------- */
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button){
  width: min(1240px, 96vw);
  min-height: 520px;
  max-height: 88vh;
  margin: 0 auto;
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* ---------------------------------------------------------------------------
   Header (primary + fallback)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-header, .runsui-header, header, .header, .top, .runs-top),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-header, .runsui-header, header, .header, .top, .runs-top){
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: 10px 12px;
  padding: 18px 18px 14px 18px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}

/* Title */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-title, .runsui-title, h1, h2, h3),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-title, .runsui-title, h1, h2, h3){
  margin: 0;
  color: var(--ru-text);
  font-weight: 800;
  letter-spacing: .2px;
  flex: 1 1 260px;
  min-width: 220px;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-subtitle, .runsui-subtitle, .subtitle, small),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-subtitle, .runsui-subtitle, .subtitle, small){
  color: var(--ru-muted);
  font-size: 12px;
  line-height: 1.25;
}

/* ---------------------------------------------------------------------------
   Controls (works even without wrapper)
--------------------------------------------------------------------------- */
:where(
  .runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar, .header-actions, .actions
){
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px 12px;
}

/* Container holding search+select+buttons */
:where(div, header, section):has(input[placeholder*="Search runs"]):has(select):has(button){
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px 12px;
}

/* Sort select */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  select,
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  select{
  flex: 0 1 340px;
  min-width: 180px;
  max-width: 520px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
}

/* Search input */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(input[type="search"], input[placeholder*="Search runs"], input[placeholder*="search runs"]),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(input[type="search"], input[placeholder*="Search runs"], input[placeholder*="search runs"]){
  flex: 0 0 240px;
  max-width: 320px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
  position: static !important;
  top: auto !important;
  right: auto !important;
}

/* Header buttons (text buttons only) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  button:not(.icon):not(.btn-icon):not(:has(svg)),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  button:not(.icon):not(.btn-icon):not(:has(svg)){
  height: 38px;
  padding: 0 14px;
  border-radius: 999px;
  border: 1px solid rgba(0, 180, 210, .55);
  background: rgba(0, 180, 210, .14);
  color: var(--ru-text);
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
}

/* ---------------------------------------------------------------------------
   Body layout (only if wrappers exist)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-body, .runs-content, .runsui-content),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-body, .runs-content, .runsui-content){
  padding: 14px 18px 18px 18px;
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: var(--ru-gap);
  min-height: 0;
}

/* Left list column */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-list, .runsui-list, .runs-list-col),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-list, .runsui-list, .runs-list-col){
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(12, 19, 28, .45);
  border-radius: var(--ru-radius);
  overflow: hidden;
  display: grid;
  grid-template-rows: 1fr;
  min-height: 0;
}

/* Details column */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-detail, .runs-details, .runsui-detail, .detail),
:where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
  :is(.runs-detail, .runs-details, .runsui-detail, .detail){
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(12, 19, 28, .45);
  border-radius: var(--ru-radius);
  overflow: auto;
  padding: 14px;
  min-height: 0;
}

/* ---------------------------------------------------------------------------
   SAVE overlay (minimal safe styling)
--------------------------------------------------------------------------- */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  :is(.save-modal, .save-panel, .save-window, .saveui-modal),
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  > :is(div, section, article, dialog):first-child{
  width: min(740px, 94vw);
  max-height: min(520px, 86vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: auto;
  padding: 16px;
}

/* ---------------------------------------------------------------------------
   Responsive
--------------------------------------------------------------------------- */
@media (max-width: 920px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-body, .runs-content, .runsui-content),
  :where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
    :is(.runs-body, .runs-content, .runsui-content){
    grid-template-columns: 1fr;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    select,
  :where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
    select{
    flex: 1 1 220px;
    max-width: none;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(input[type="search"], input[placeholder*="Search runs"], input[placeholder*="search runs"]),
  :where(div, section, article, dialog):has(input[placeholder*="Search runs"]):has(select):has(button)
    :is(input[type="search"], input[placeholder*="Search runs"], input[placeholder*="search runs"]){
    flex: 1 1 220px;
    max-width: none;
  }
}

@media (max-width: 520px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
      #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay){
    padding: 12px;
  }
}
