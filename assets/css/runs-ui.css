/* assets/css/runs-ui.css — V1.0.2 (RUNS_SAVE_OPEN_STATES_FIX)
   ---------------------------------------------------------------------------
   UI "Save / Runs" (FRET / MINING / SALVAGE) — Layout & open/close resiliency.

   Fixes reported issue: "Runs" and "Save" buttons appear to do nothing.
   Root cause: previous layout CSS expected a specific "open" state (class/data),
   but the JS can toggle overlays via other mechanisms (hidden attribute / show/active).

   This version:
   - Supports multiple open states: .open/.show/.active/.is-open/.visible, data-open,
     aria-hidden=false, and for ID overlays: when [hidden] is removed.
   - Adds a minimal, safe styling for the Save overlay (if your project uses it).
   - Keeps the improved header/body layout introduced in V1.0.1.

   Notes:
   - CSS is intentionally resilient: it targets several possible overlay/modal IDs/classes.
*/

:root{
  --ru-bg: rgba(7, 12, 18, .82);
  --ru-surface: rgba(12, 19, 28, .72);
  --ru-surface-2: rgba(18, 27, 38, .68);
  --ru-border: rgba(255,255,255,.10);
  --ru-border-2: rgba(255,255,255,.14);
  --ru-text: rgba(245, 248, 255, .92);
  --ru-muted: rgba(245, 248, 255, .64);
  --ru-muted-2: rgba(245, 248, 255, .45);
  --ru-shadow: 0 10px 40px rgba(0,0,0,.55);
  --ru-radius: 18px;
  --ru-radius-sm: 12px;
  --ru-gap: 14px;
  --ru-gap-sm: 10px;
  --ru-accent: rgba(0, 180, 210, .95);
  --ru-accent-2: rgba(0, 180, 210, .25);
}

/* ---------------------------------------------------------------------------
   Overlay roots (Runs + Save) — support multiple IDs/classes
--------------------------------------------------------------------------- */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
){
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;                 /* do NOT depend on JS setting display */
  place-items: center;
  padding: 22px;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  /* Hidden state by default */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* Hard-hide if HTML uses hidden attribute */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay
)[hidden]{
  display: none !important;
}

/* Open states: class-based */
:is(
  #runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
  #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay
):is(.open, .show, .active, .is-open, .visible, [data-open="1"], [data-open="true"], [aria-hidden="false"]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Open state: hidden-attribute based (common pattern: remove [hidden] to open)
   Only for explicit IDs to avoid accidentally opening non-overlay elements. */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, #saveOverlay, #saveRunOverlay, #shogSaveOverlay):not([hidden]){
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* ---------------------------------------------------------------------------
   RUNS modal container
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-modal, .runs-panel, .runs-window, .runsui-modal){
  width: min(1240px, 96vw);
  height: min(580px, 88vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* ---------------------------------------------------------------------------
   RUNS Header
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-header, .runsui-header, header){
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--ru-gap);
  align-items: end;
  padding: 18px 18px 14px 18px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-title, .runsui-title, h1, h2, h3){
  margin: 0;
  color: var(--ru-text);
  font-weight: 800;
  letter-spacing: .2px;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-subtitle, .runsui-subtitle, .subtitle){
  margin-top: 4px;
  color: var(--ru-muted);
  font-size: 12px;
  line-height: 1.25;
}

/* Header controls: non-overlapping toolbar */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar){
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
  gap: 10px 12px;
  min-width: min(720px, 100%);
}

/* Sort select */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  select{
  order: 1;
  flex: 0 1 340px;
  min-width: 180px;
  max-width: 520px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
}

/* Search input */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  :is(input[type="search"], input[placeholder*="Search"], input[placeholder*="search"]){
  order: 2;
  flex: 0 0 240px;
  max-width: 320px;
  height: 38px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--ru-border);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
  position: static !important;
  top: auto !important;
  right: auto !important;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  :is(input[type="search"], input[placeholder*="Search"], input[placeholder*="search"])::placeholder{
  color: var(--ru-muted-2);
}

/* Header action buttons (Refresh / Export / Close) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  button{
  order: 3;
  height: 38px;
  padding: 0 14px;
  border-radius: 999px;
  border: 1px solid rgba(0, 180, 210, .55);
  background: rgba(0, 180, 210, .14);
  color: var(--ru-text);
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
  transition: transform .06s ease, background .12s ease, border-color .12s ease;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  button:hover{
  background: rgba(0, 180, 210, .22);
  border-color: rgba(0, 180, 210, .75);
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  button:active{
  transform: translateY(1px);
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  button[data-variant="danger"],
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
  button.danger{
  border-color: rgba(220, 70, 70, .70);
  background: rgba(220, 70, 70, .14);
}

/* ---------------------------------------------------------------------------
   RUNS Body layout (Runs list / Details)
--------------------------------------------------------------------------- */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-body, .runs-content, .runsui-content){
  padding: 14px 18px 18px 18px;
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: var(--ru-gap);
  min-height: 0;
}

/* Left list column */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-list, .runsui-list, .runs-list-col){
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(12, 19, 28, .45);
  border-radius: var(--ru-radius);
  overflow: hidden;
  display: grid;
  grid-template-rows: 1fr;
  min-height: 0;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-list, .runsui-list, .runs-list-col) > *{
  min-height: 0;
}

/* Inner list scroller */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-list-scroll, .runsui-list-scroll, ul, ol){
  overflow: auto;
  padding: 10px;
  margin: 0;
  list-style: none;
}

/* Run item card */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-item, .runs-item, li){
  background: rgba(10,16,24,.55);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: var(--ru-radius);
  padding: 12px 12px;
  margin: 0 0 10px 0;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: start;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-item, .runs-item, li).active,
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-item, .runs-item, li)[data-active="1"]{
  border-color: rgba(0, 180, 210, .45);
  box-shadow: 0 0 0 1px rgba(0, 180, 210, .18) inset;
}

/* Title + meta */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-title, .runs-item-title, strong){
  color: var(--ru-text);
  font-weight: 800;
  line-height: 1.15;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-meta, .runs-item-meta, .meta, small, .muted){
  color: var(--ru-muted);
  font-size: 12px;
  line-height: 1.35;
}

/* Actions (icons) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-actions, .runs-item-actions){
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: flex-end;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-actions, .runs-item-actions)
  button{
  height: 34px;
  width: 34px;
  padding: 0;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(18, 27, 38, .55);
  color: var(--ru-text);
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.run-actions, .runs-item-actions)
  button:hover{
  border-color: rgba(255,255,255,.18);
  background: rgba(18, 27, 38, .72);
}

/* Details panel (right) */
:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-detail, .runs-details, .runsui-detail, .detail){
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(12, 19, 28, .45);
  border-radius: var(--ru-radius);
  overflow: auto;
  padding: 14px;
  min-height: 0;
}

:is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
  :is(.runs-detail, .runs-details, .runsui-detail, .detail)
  :is(.empty, .empty-state){
  padding: 18px;
  border: 1px dashed rgba(255,255,255,.14);
  border-radius: var(--ru-radius);
  background: rgba(10,16,24,.40);
  color: var(--ru-muted);
}

/* ---------------------------------------------------------------------------
   SAVE overlay (minimal safe styling; your JS decides the structure)
--------------------------------------------------------------------------- */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  :is(.save-modal, .save-panel, .save-window, .saveui-modal){
  width: min(740px, 94vw);
  max-height: min(520px, 86vh);
  border-radius: var(--ru-radius);
  background: linear-gradient(180deg, rgba(10,16,24,.92), rgba(6,11,18,.92));
  border: 1px solid var(--ru-border);
  box-shadow: var(--ru-shadow);
  overflow: auto;
  padding: 16px;
}

/* Basic form controls inside save modal */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  :is(.save-modal, .save-panel, .save-window, .saveui-modal)
  :is(input, textarea, select){
  width: 100%;
  margin-top: 8px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(10,16,24,.70);
  color: var(--ru-text);
  outline: none;
}

:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  :is(.save-modal, .save-panel, .save-window, .saveui-modal)
  :is(textarea){
  min-height: 110px;
  resize: vertical;
}

/* Save modal buttons */
:is(#saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay)
  :is(.save-modal, .save-panel, .save-window, .saveui-modal)
  :is(button){
  height: 38px;
  padding: 0 14px;
  border-radius: 999px;
  border: 1px solid rgba(0, 180, 210, .55);
  background: rgba(0, 180, 210, .14);
  color: var(--ru-text);
  font-weight: 700;
  cursor: pointer;
}

/* ---------------------------------------------------------------------------
   Responsive adjustments
--------------------------------------------------------------------------- */
@media (max-width: 920px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-body, .runs-content, .runsui-content){
    grid-template-columns: 1fr;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar){
    min-width: 0;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
    select{
    flex: 1 1 220px;
    max-width: none;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar)
    :is(input[type="search"], input[placeholder*="Search"], input[placeholder*="search"]){
    flex: 1 1 220px;
    max-width: none;
  }
}

@media (max-width: 520px){
  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay,
      #saveOverlay, #saveRunOverlay, #shogSaveOverlay, .save-overlay, .save-ui-overlay, .saveui-overlay){
    padding: 12px;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-header, .runsui-header, header){
    grid-template-columns: 1fr;
    align-items: start;
  }

  :is(#runsOverlay, #runsUiOverlay, #shogRunsOverlay, .runs-overlay, .runs-ui-overlay, .runsui-overlay)
    :is(.runs-controls, .runs-toolbar, .runsui-toolbar, .toolbar){
    justify-content: flex-start;
  }
}
